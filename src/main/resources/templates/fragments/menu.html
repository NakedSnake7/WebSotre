<div th:fragment="menu">
	<!-- Menu Section -->
	<div id="menu" class="text-center bg-dark text-light has-height-md middle-items wow fadeIn">
		<h2 class="section-title">
			<a href="/menu" class="text-light text-decoration-none">MENU</a>
		</h2>
	</div>

	<div class="row justify-content-center">
		<div class="col-sm-7 col-md-4 mb-5">
			<ul id="menu-list" class="nav nav-pills nav-justified mb-3"></ul>
			<ul class="nav nav-pills nav-justified mb-3" id="pills-tab" role="tablist">
				<li class="nav-item" th:each="categoria, iter : ${categorias}">
					<a class="nav-link"
					   th:classappend="${iter.first} ? 'active' : ''"
					   data-toggle="pill"
					   th:href="'#' + ${categoria}"
					   th:text="${categoria}"> </a>
				</li>
			</ul>
		</div>
	</div>

	<div class="tab-content" id="pills-tabContent">
		<!-- Iterar sobre las categorías -->
		<div th:each="categoria, iter : ${categorias}"
			 class="tab-pane fade"
			 th:classappend="${iter.first} ? 'show active' : ''"
			 th:id="${categoria}" role="tabpanel">
			<div class="row">
				<!-- Iterar productos por categoría -->
				<div th:each="producto : ${productos}"
					 th:if="${producto.categoria == categoria}"
					 class="col-md-4">
					
					<div class="card bg-transparent border my-3 my-md-0">
						<img th:src="@{${producto.imagenUrl != null ? producto.imagenUrl : '/imgs/default.png'}}"
							 class="d-block w-100" alt="Imagen de producto">

						<div class="card-body">
							<h1 class="text-center mb-4">
								<!-- Con promoción -->
								<span th:if="${producto.tienePromocion}">
									<span class="badge badge-secondary mr-2" style="text-decoration: line-through;">
										$<span th:text="${#numbers.formatDecimal(producto.price, 1, 'POINT', 2, 'NONE')}"></span>
									</span>
									<span class="badge badge-danger">
										$<span th:text="${#numbers.formatDecimal(producto.precioConDescuento, 1, 'POINT', 2, 'NONE')}"></span>
									</span>
									<span class="badge badge-success ml-1">
										-<span th:text="${producto.porcentajeDescuento}"></span>%
									</span>
								</span>

								<!-- Sin promoción -->
								<span th:if="${!producto.tienePromocion}">
									<span class="badge badge-primary">
										$<span th:text="${#numbers.formatDecimal(producto.price, 1, 'POINT', 2, 'NONE')}"></span>
									</span>
								</span>
							</h1>

							<h4 class="pt20 pb20" th:text="${producto.productName}"></h4>

							<!-- Selector cantidad -->
							<div class="mb-3 d-flex align-items-center">
								<label th:for="'quantity-' + ${producto.id}" class="text-white mr-2">Cantidad:</label>
								<input type="number"
									   th:id="'quantity-' + ${producto.id}"
									   name="quantity"
									   class="form-control-modern"
									   min="1"
									   value="1"
									   style="width: 3.0rem; text-align: center;">
							</div>

							<div class="text-center">
								<button class="btn btn-primary btn-sm px-3 add-to-cart"
										th:attr="data-name=${producto.productName}, data-price=${producto.price}, data-quantity-id='quantity-' + ${producto.id}">
									Agregar al carrito
								</button>
							</div>
						</div>
					</div>

				</div>
				<!-- Fin productos -->
			</div>
		</div>
		<!-- Fin categorías -->
	</div>
</div>
