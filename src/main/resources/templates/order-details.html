<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Detalles de Orden | WeedTlan</title>

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<style>
body {
	background: #0f1115;
	font-family: 'Poppins', sans-serif;
	color: #e2e2e2;
}

h2 {
	text-align: center;
	color: #00ffaa;
	text-shadow: 0 0 12px #00ffaa;
	letter-spacing: 2px;
	margin-bottom: 30px;
}

.card-maya {
	background: rgba(255, 255, 255, 0.03);
	padding: 25px;
	border-radius: 20px;
	border: 1px solid rgba(0, 255, 170, 0.25);
	backdrop-filter: blur(12px);
	box-shadow: 0 0 25px rgba(0, 255, 170, 0.15);
}

.label {
	color: #00ffaa;
	font-weight: bold;
	text-shadow: 0 0 6px #00ffaa;
}

.valor {
	color: #e2e2e2;
}

.btn-maya {
	border: 1px solid #00ffaa;
	color: #00ffaa;
	background: transparent;
	transition: 0.25s;
}

.btn-maya:hover {
	background: #00ffaa;
	color: #000;
	box-shadow: 0 0 12px #00ffaa;
}

table thead {
	background: rgba(0, 255, 170, 0.15);
}

table thead th {
	color: #00ffaa;
	border-bottom: 2px solid #00ffaa;
}

table tbody tr:hover {
	background: rgba(0, 255, 170, 0.07);
}
</style>
</head>

<body class="container mt-5">

	<h2>ðŸ“„ Detalles de la Orden</h2>

	<div class="card-maya">

		<!-- Info del cliente -->
		<h4 class="mb-3" style="color: #00ffaa; text-shadow: 0 0 6px #00ffaa;">ðŸ‘¤
			InformaciÃ³n del Cliente</h4>

		<p>
			<span class="label">Nombre:</span> <span class="valor"
				th:text="${order.user != null ? order.user.fullName : 'Sin nombre'}"></span>
		</p>

		<p>
			<span class="label">Correo:</span> <span class="valor"
				th:text="${order.user != null ? order.user.email : 'Sin correo'}"></span>
		</p>

		<p>
			<span class="label">TelÃ©fono:</span> <span class="valor"
				th:text="${order.user != null ? order.user.phone : 'Sin telÃ©fono'}"></span>
		</p>

		<p>
			<span class="label">DirecciÃ³n:</span> <span class="valor"
				th:text="${order.address}"></span>
		</p>


		<hr style="border-color: rgba(0, 255, 170, 0.2)">

		<!-- Info de la orden -->
		<h4 class="mb-3" style="color: #00ffaa; text-shadow: 0 0 6px #00ffaa;">ðŸ§¾
			InformaciÃ³n de la Orden</h4>

		<p>
			<span class="label">ID:</span> <span class="valor"
				th:text="${order.id}"></span>
		</p>
		<p>
			<span class="label">Fecha:</span> <span class="valor"
				th:text="${order.orderDate}"></span>
		</p>
		<p>
			<span class="label">Estado:</span> <span class="valor"
				th:text="${order.status}"></span>
		</p>
		<p>
			<span class="label">Total:</span> $<span class="valor"
				th:text="${order.total}"></span>
		</p>

		<hr style="border-color: rgba(0, 255, 170, 0.2)">
<hr style="border-color: rgba(0, 255, 170, 0.2)">

<!-- SecciÃ³n para ingresar nÃºmero de guÃ­a y paqueterÃ­a -->
<h4 class="mb-3" style="color: #00ffaa; text-shadow: 0 0 6px #00ffaa;">ðŸ“¦ EnvÃ­o</h4>

<form th:action="@{/orders/update-shipping}" method="post" class="mb-4">
    <input type="hidden" name="orderId" th:value="${order.id}" />

    <div class="form-group">
        <label class="label" for="courier">PaqueterÃ­a</label>
        <select class="form-control" id="courier" name="courier" required
                style="background: rgba(255,255,255,0.03); color: #e2e2e2; border: 1px solid #00ffaa;">
            <option value="">Selecciona la paqueterÃ­a</option>
         <option value="DHL" th:selected="${order.carrier == 'DHL'}">DHL</option>
<option value="FedEx" th:selected="${order.carrier == 'FedEx'}">FedEx</option>
<option value="UPS" th:selected="${order.carrier == 'UPS'}">UPS</option>
<option value="Estafeta" th:selected="${order.carrier == 'Estafeta'}">Estafeta</option>

        </select>
    </div>

    <div class="form-group">
        <label class="label" for="trackingNumber">NÃºmero de GuÃ­a</label>
        <input type="text" class="form-control" id="trackingNumber" name="trackingNumber"
               th:value="${order.trackingNumber}" placeholder="Ingresa el nÃºmero de guÃ­a"
               style="background: rgba(255,255,255,0.03); color: #e2e2e2; border: 1px solid #00ffaa;" required>
    </div>

    <div class="text-center mt-3">
        <button type="submit" class="btn btn-maya">ðŸ’¾ Guardar</button>
    </div>
</form>

		<!-- Tabla de productos -->
		<h4 class="mb-3" style="color: #00ffaa; text-shadow: 0 0 6px #00ffaa;">ðŸ›’
			Productos Comprados</h4>

		<table class="table table-dark table-hover">
			<thead>
				<tr>
					<th>Producto</th>
					<th>Cantidad</th>
					<th>Precio</th>
					<th>Subtotal</th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="item : ${order.items}">
					<td th:text="${item.producto.productName}"></td>
					<td th:text="${item.quantity}"></td>
					<td>$<span th:text="${item.producto.price}"></span></td>
					<td>$<span th:text="${item.quantity * item.producto.price}"></span>
					</td>
				</tr>
			</tbody>
		</table>

		<div class="text-center mt-4">
			<a href="/orders" class="btn btn-maya">â¬… Volver</a>
		</div>

	</div>

</body>
</html>
